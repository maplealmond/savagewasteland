(function($,mw){'use strict';var conf=mw.config.get(['debug','wgAction','wgCanonicalSpecialPageName','wgNamespaceNumber','wgTitle','wgUserName']),noHideTags=!!((window.dev||{}).profileTags||{}).noHideTags;function hideTags($masthead){var $tags=$masthead.find('.tag');$tags.hide();}function getTagClass(tag){var tagClass='tag-'+tag.toLowerCase().replace(/\s/g,'_');return tagClass;}function getLinkTag($span,tag){var re=/\[\[(.+?)\|(.+?)\]\]/,match=re.exec(tag),href=mw.util.wikiGetlink(match[1]),text=match[2],$a=$('<a>').attr('href',href).css('color','inherit').text(text);$span.addClass(getTagClass(tag)).append($a);return $span;}function addProfileTags(tags){var $masthead=$('.UserProfileMasthead hgroup'),linkTestRe=/\[\[.+?\|.+?\]\]/;if(!noHideTags){hideTags($masthead);}tags.forEach(function(tag){var $span=$('<span>').addClass('tag');if(linkTestRe.test(tag)){$span=getLinkTag($span,tag);}else{$span.addClass(getTagClass(tag)).text(tag);}$masthead.append($span,' ');});mw.hook(
'dev.profile-tags').fire();}function getUserName(){var user=conf.wgTitle,target=$.getUrlVar('target'),parts;if(conf.wgCanonicalSpecialPageName==='Contributions'){parts=user.split('/');if(parts.length===2){user=parts[1];}else if(target){user=decodeURIComponent(target).replace(/_/g,' ');}else{user=conf.wgUserName;if(user===null){user='';}}}return user;}function getUserTags(){var params={action:'raw',title:'MediaWiki:ProfileTags'};if(conf.debug){params.maxage=0;params.smaxage=0;}$.get(mw.util.wikiScript(),params,function(data){if(!data.length){return;}var user=$.escapeRE(getUserName()),re=new RegExp('(?:^|\\n)\\s*'+user+'\\s*\\|\\s*(.*?)\\s*(?:\\n|$)'),match=re.exec(data),tags;if(match===null){return;}tags=match[1].split(/\s*,\s*/);if(tags.length){addProfileTags(tags);}});}function init(){if($('.UserProfileMasthead').length){mw.loader.using(['mediawiki.util','site'],getUserTags);}}$(init);}(jQuery,mediaWiki));;importArticle({type:'script',article:'u:dev:MediaWiki:AjaxRC.js'});;(function()
{'use strict';var mconfig=mw.config.get(['wgUserLanguage','wgUserName']);if(window.DiscordIntegratorLoaded){return;}window.DiscordIntegratorLoaded=!0;var DiscordIntegrator={config:(window.DiscordIntegratorConfig||{}).siderail||{},hook:function(i18n){$.when(i18n.loadMessages('DiscordIntegrator'),mw.loader.using('mediawiki.api')).then($.proxy(this.preload,this));},preload:function(i18n){this.i18n=i18n;mw.hook('wikipage.content').add($.proxy(this.insertToContent,this));this.api=new mw.Api();this.api.get({action:'query',meta:'allmessages',ammessages:['id','title','moduleHeight','theme','width','height','text','logged-in','footer','username'].map(function(el){return'Custom-DiscordIntegrator-config-'+el;}).join('|'),amlang:mconfig.wgUserLanguage,smaxage:300,maxage:300}).done($.proxy(function(d){if(!d.error){d.query.allmessages.forEach(function(el){if(el['*']){this.config[el.name.substring(32)]=el['*'];}},this);this._loading=0;['text','title','footer'].forEach(this.parse,this);if(this.
_loading===0){this.init();}}},this));},parse:function(msg){if(this.config[msg]){++this._loading;this.api.get({action:'parse',text:this.config[msg]}).done($.proxy(function(d){if(!d.error){this.config[msg]=d.parse.text['*'];if(--this._loading===0){this.init();}}},this));}},init:function(){if(this.config.id&&$('#WikiaRail').length>0){var clas=$('#WikiaRail').attr('class');if(clas&&clas.split(/\s+/).indexOf('loaded')===-1){$('#WikiaRail').on('afterLoad.rail',$.proxy(this.insertToSiderail,this));}else{this.insertToSiderail();}}},insertToSiderail:function(){var filter=$('#top-right-boxad-wrapper, #top-boxad-wrapper, #NATIVE_TABOOLA_RAIL, .content-review-module').last(),el=$('<div>',{class:'DiscordIntegratorModule rail-module'});if(this.config.title){el.append($('<h2>',{'class':'activity-heading',html:this.config.title}));}if(this.config.text){el.append($('<p>',{id:'DiscordIntegratorModuleText',html:this.config.text}));}el.append(this.generateContent(this.config));if(this.config.footer){el.
append($('<p>',{id:'DiscordIntegratorModuleFooter',html:this.config.footer}));}if(filter.length>0){el.insertAfter(filter);}else{$('#WikiaRail').prepend(el);}if(this.config.moduleHeight){mw.util.addCSS('.DiscordIntegratorModule { height: '+Number(this.config.moduleHeight)+'px; }');}mw.hook('DiscordIntegrator.added').fire(el);},insertToContent:function($content){$content.find('.DiscordIntegrator:not(.loaded)').each($.proxy(function(cabbage,el){el=$(el);el.html(this.generateContent(el.data())).addClass('loaded');},this));},generateContent:function(config){return config.id?((config.loggedIn===true||(Boolean(config['logged-in'])===true&&config['logged-in']!=='false'&&config['logged-in']!=='{{{loggedIn}}}'))&&!mconfig.wgUserName)?this.i18n.msg('login').parse():mw.html.element('iframe',{src:'https://discordapp.com/widget?id='+config.id+'&theme='+(config.theme==='light'?'light':'dark')+'&username='+encodeURIComponent(config.username==='@disabled'?'':config.username==='@function'&&typeof window
.DiscordIntegratorGetUsername==='function'?window.DiscordIntegratorGetUsername():config.username||mconfig.wgUserName),width:config.width||'100%',height:config.height||'400px',allowtransparency:'true',frameborder:'0'}):this.i18n.msg('error').escape();}};mw.hook('dev.i18n').add($.proxy(DiscordIntegrator.hook,DiscordIntegrator));importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});})();;function strPad(n){return String("00"+n).slice(-2);}function updateContent(content,isMod,canBlock,arr){for(var i=arr._embedded["doc:posts"].length-1;i>-1;i--){var text=arr._embedded["doc:posts"][i].rawContent,user=arr._embedded["doc:posts"][i].createdBy.name,userId=arr._embedded["doc:posts"][i].createdBy.id,epoch=arr._embedded["doc:posts"][i].creationDate.epochSecond,postID=arr._embedded["doc:posts"][i].id,threadID=arr._embedded["doc:posts"][i].threadId,isReported=Boolean(arr._embedded["doc:posts"][i].isReported),forumName=arr._embedded["doc:posts"][i].forumName,dt=new Date(epoch*1000),
formattedDate=strPad(dt.getHours())+":"+strPad(dt.getMinutes())+":"+strPad(dt.getSeconds());var spanDate=document.createElement("span"),spanDateText=document.createTextNode(formattedDate+" — ");spanDate.className="df-date";spanDate.appendChild(spanDateText);var aMessage=document.createElement("a"),aMessageText=document.createTextNode(text);aMessage.className="df-content";aMessage.href=mw.config.get('wgScriptPath')+"/f/p/"+threadID;aMessage.target="_blank";aMessage.appendChild(aMessageText);var aUser=document.createElement("a"),aUserText=document.createTextNode(" — "+user);aUser.className="df-user";aUser.href=mw.config.get('wgScriptPath')+"/f/u/"+userId;aUser.target="_blank";aUser.appendChild(aUserText);var spanCategory=document.createElement("span"),spanCategoryText=document.createTextNode(" in "+forumName);spanCategory.className="df-category";spanCategory.appendChild(spanCategoryText);if(canBlock){var aBlock=document.createElement("a"),aBlockText=document.createTextNode(" (block)"
);aBlock.className="df-block";aBlock.href=mw.util.getUrl("Special:Block/")+user;aBlock.target="_blank";aBlock.appendChild(aBlockText);}var par=document.createElement("p");par.className="df-entry";if(isReported){par.className+=" df-reported";}par.appendChild(spanDate);par.appendChild(aMessage);par.appendChild(aUser);par.appendChild(spanCategory);if(canBlock){par.appendChild(aBlock);}content.insertBefore(par,content.firstChild);}}function updateFeed(content,isMod,canBlock,epoch){var rcLimit=50,dt=new Date(epoch*1000+1),request=new XMLHttpRequest();request.onreadystatechange=function(){if(request.readyState==4){switch(request.status){case 200:var arr=JSON.parse(request.responseText);updateContent(content,isMod,canBlock,arr);if(arr._embedded["doc:posts"].length>0){epoch=arr._embedded["doc:posts"][0].creationDate.epochSecond;}break;default:setTimeout(updateFeed,120000,content,isMod,canBlock,epoch);}}};request.open("GET","https://services.fandom.com/discussion/"+wgCityId+"/posts?limit="+
rcLimit+"&since="+dt.toISOString()+"&page=0&responseGroup=small&reported=false&viewableOnly="+(!isMod).toString(),true);request.setRequestHeader('Accept','application/hal+json');request.withCredentials=!0;request.send();}function initFeed(content,isMod,canBlock){var rcLimit=50,request=new XMLHttpRequest();request.timeout=30000;request.ontimeout=function(){content.innerHTML="Unable to load discussions: The service is down or is not enabled for this domain.";};request.onreadystatechange=function(){if(request.readyState==4){switch(request.status){case 200:var arr=JSON.parse(request.responseText);content.innerHTML='';updateContent(content,isMod,canBlock,arr);var epoch=arr._embedded["doc:posts"][0].creationDate.epochSecond;setTimeout(updateFeed,120000,content,isMod,canBlock,epoch);break;case 404:content.innerHTML='There are no posts.';break;default:content.innerHTML="Unable to load discussions: The service is down or is not enabled for this domain.";}}};request.open("GET",
"https://services.fandom.com/discussion/"+wgCityId+"/posts?limit="+rcLimit+"&page=0&responseGroup=small&reported=false&viewableOnly="+(!isMod).toString(),true);request.setRequestHeader('Accept','application/hal+json');request.withCredentials=!0;request.send();}function createDiscussionsFeed(){if(wgNamespaceNumber==-1&&wgTitle=="DiscussionsFeed"){document.title='Discussions Feed - '+wgSiteName;var canBlock=Boolean(wgUserGroups.indexOf('sysop')>-1||wgUserGroups.indexOf('staff')>-1||wgUserGroups.indexOf('helper')>-1||wgUserGroups.indexOf('vstf')>-1||wgUserGroups.indexOf('global-discussions-moderator')>-1),isMod=Boolean(canBlock||wgUserGroups.indexOf('threadmoderator')>-1);if(window.skin=="oasis"){document.getElementById("PageHeader").getElementsByTagName("h1")[0].textContent="Discussions Feed";}else if(window.skin=="monobook"){document.getElementById("firstHeading").textContent="Discussions Feed";}var content=document.getElementById("mw-content-text");content.innerHTML=
'Loading feed... <img src="https://images.wikia.nocookie.net/wlb/images/7/74/WIP.gif" /></div>';initFeed(content,isMod,canBlock);}}{var j=-1;for(var i=0;i<onloadFuncts.length&&j<0;i++){if(onloadFuncts[i].name=="createDiscussionsFeed"){j=i;}}if(j<0){addOnloadHook(createDiscussionsFeed);}};(function(){if(!$('#userIdentityBoxEdit').exists()||window.EditBioLoaded){return;}window.EditBioLoaded=!0;var username=$('.masthead-info h1[itemprop="name"]').text();if(!window.dev||!window.dev.i18n){importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}importArticle({type:'style',article:'u:dev:MediaWiki:EditBio.css'});var i18n,userdata;function saveError(res){console.error(res);}function saveBio(){$.ajax({type:'PUT',url:'https://services.fandom.com/user-attribute/user/'+userdata.id+'/attr/bio',data:{value:$('#edit-bio-form #edit-bio-content').val()},xhrFields:{withCredentials:!0},error:saveError,success:clearCache});}function closeModal(){$('#edit-bio-form').closeModal();}
function cacheCallback(res){if(res.status==='ok'){closeModal();setTimeout(refreshMasthead,500);}else{console.error(res);}}function clearCache(){$.nirvana.postJson('UserProfilePage','saveUserData',{userId:userdata.id,data:JSON.stringify({birthday:userdata.birthday}),token:mw.user.tokens.get('editToken')},cacheCallback);}function refreshMasthead(){window.location.reload();}function editBio(){var bio=userdata.bio||'',modalContent=$('<div>').append($('<textarea>',{id:'edit-bio-content',rows:bio.split('\n').length,text:bio}));if(username!==mw.config.get('wgUserName')){modalContent.prepend($('<p>').append($('<strong>').text(i18n.msg('caution').plain()),':&nbsp;',i18n.msg('foreign-bio-edit').escape()));}$.showCustomModal(i18n.msg('edit').escape(),modalContent.html(),{id:'edit-bio-form',buttons:[{message:i18n.msg('cancel').escape(),handler:closeModal,id:'edit-bio-cancel'},{message:i18n.msg('save').escape(),handler:saveBio,defaultButton:!0,id:'edit-bio-save'}]});}function init(i18nd,nirvana){
i18n=i18nd;if(nirvana[0]&&nirvana[0].user){userdata=nirvana[0].user;$('.WikiaUserPagesHeader .details ul').append($('<div>',{text:'['+i18n.msg('edit').plain()+']',id:'edit-bio-button',click:editBio}));}}function nirvana(){return $.nirvana.getJson('UserProfilePage','renderUserIdentityBox',{title:'User:'+username});}function i18nCallback(i18no){$.when(i18no.loadMessages('EditBio'),nirvana()).then(init);}mw.hook('dev.i18n').add(i18nCallback);})();;require(['wikia.window','jquery','mw','wikia.tracker'],function(window,$,mw,tracker){var config={player:'VXc5h4Tf',langs:{en:{header:'New to editing and contributing? We have an <a href="https://community.fandom.com/wiki/Fandom_University" title="Fandom University">extensive video library</a> to help you learn how to edit.',playlist:'g0INIi6n'},es:{header:
'¿Estás empezando a editar y contribuir? Tenemos una <a href="https://comunidad.fandom.com/wiki/Universidad_de_FANDOM" title="Universidad de FANDOM">extensa videoteca</a> para ayudarte a aprender.',playlist:'XdgYjVRp?related_media_id=sxyvaxtY'}}},track=tracker.buildTrackingFunction({category:'fandomu-module',action:tracker.ACTIONS.CLICK,trackingMethod:'analytics'});function videoPlaylistModule(){if($('#community-page-player').length){return;}importArticle({type:'style',article:'u:dev:MediaWiki:FandomU.css'});var lang=mw.config.get('wgUserLanguage');lang=config.langs.hasOwnProperty(lang)?lang:'en';var $header=$('<div>',{class:'community-page-cards-module-header'}).html(config.langs[lang].header),$playerWrapper=$('<div>',{class:'community-page-todo-list-module'}),$player=$('<div>',{id:'community-page-player'}),$playlistWrapper=$('<div>',{class:'community-page-module'}),$playlist=$('<div>',{id:'community-page-player-list'});$('<div>',{class:
'CommunityPageMainContent CommunityPageFandomU'}).append($header,$playerWrapper.append($player),$('<div>',{class:'community-page-rail'}).append($playlistWrapper.append($playlist))).prependTo('.CommunityPageContainer');function resize(){$playlist.css('max-height',$player.height());var headerPaddingLeft=parseInt($playerWrapper.css('margin-left'));$header.css({'padding-left':headerPaddingLeft,'padding-right':$header.outerWidth()-($playlistWrapper[0].offsetLeft-$player[0].offsetLeft+$playlistWrapper.width())-headerPaddingLeft});}$(window).on('resize',resize);$.getScript('//content.jwplatform.com/libraries/'+config.player+'.js').then(function(){jwplayer('community-page-player').setup({autostart:!1,playlist:'//cdn.jwplayer.com/v2/playlists/'+config.langs[lang].playlist,pid:config.player,width:'100%'}).on('ready',function(){$player=$('#community-page-player');var player=this;player.getPlaylist().forEach(function(e){$('<img>',{class:'community-page-player-list-item',src:e.image,width:
'calc( 100% - 3px )'}).click(function(){player.playlistItem($(this).index());}).appendTo($playlist);});track({action:tracker.ACTIONS.FLOW_START,label:'jwplayer-ready'});resize();}).on('viewable',function(){resize();}).on('playlistItem',function(e){$playlist.children('.active').removeClass('active');$playlist.children().eq(e.index).addClass('active');track({action:tracker.ACTIONS.SELECT,label:'playlistitem',value:e.index});}).on('firstFrame',function(){track({action:tracker.ACTIONS.PLAY_VIDEO,label:'play',value:this.getPlaylistIndex()});}).on('complete',function(){track({action:tracker.ACTIONS.PLAY_VIDEO,label:'complete',value:this.getPlaylistIndex()});});});}if(mw.config.get('wgCanonicalSpecialPageName')==='Community'){videoPlaylistModule();}});;require(['wikia.window','jquery','mw'],function(window,$,mw){var config=mw.config.get(['wgScriptPath','wgCanonicalSpecialPageName']);if(config.wgCanonicalSpecialPageName!=='Community'||$('#wiki-manager-module').length){return;}function
wikiManagerModule(wds,i18n){var api=new mw.Api();api.get({action:'query',meta:'allmessages',ammessages:'custom-Wiki_Manager'}).done(function(r,s){if(s!=='success'||!r.query){return;}api.get({action:'query',list:'users',ususers:r.query.allmessages[0]['*'],usprop:'groups'}).done(function(r,s){if(s!=='success'||!r.query){return;}var user=r.query.users[0];$.getJSON(config.wgScriptPath+'/api/v1/User/Details',{ids:user.userid,size:50}).done(function(r,s){if(s!=='success'||!r.items){return;}var user2=r.items[0],badge=user.groups.includes('staff')?'staff':user.groups.includes('helper')?'helper':undefined;if(badge){badge={badgeText:badge,badgeMarkup:wds.badge(badge,{width:18}).outerHTML};}require(['wikia.mustache','communitypage.templates.mustache'],function(mustache,templates){$(mustache.render(templates.adminsModule,{topAdminsData:{topAdminsHeaderText:i18n.msg('wiki-manager').plain(),topAdminsList:[{avatar:'<img src="'+user2.avatar+'">',badge:badge,profilePage:user2.url,userName:user.name}],
adminsText:'<a href="https://community.fandom.com/wiki/Help:Wiki_Managers">'+i18n.msg('wiki-manager_desc').escape()+'</a>'}},{topAdmins:templates.topAdmins.replace(/([^{]){{adminsText}}([^}])/,'$1{{{adminsText}}}$2')})).attr('id','wiki-manager-module').insertAfter('.community-page-admins-module');});});});});}$.when(new $.Deferred(function(deferred){if(window.dev&&window.dev.wds){deferred.resolve(window.dev.wds);}else{mw.hook('dev.wds').add(function(wds){deferred.resolve(wds);});importArticle({type:'script',article:'u:dev:MediaWiki:WDSIcons/code.js'});}}),new $.Deferred(function(deferred){if(window.dev&&window.dev.i18n){window.dev.i18n.loadMessages('WikiManager_Nameplate').done(deferred.resolve);}else{mw.hook('dev.i18n').add(function(i18n){i18n.loadMessages('WikiManager_Nameplate').done(deferred.resolve);});importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}}),mw.loader.using(['mediawiki.api','mediawiki.util'])).done(wikiManagerModule);});;;mw.loader.state({
"wikia.fake.articles.c55b77850a2264fc9567fe22f1e6686b":"ready"});

/* cache key: fallout:resourceloader:filter:minify-js:7:09413200a44e9c914818a97cb62a6fbf */